<link rel="import" href="esis-ui-card.html" />
<link rel="import" href="esis-ui-delete-button.html" />
<link rel="import" href="esis-ui-resource.html" />

<polymer-element name="esis-ui-file" attributes="file">
	<template>
		<link rel="stylesheet" href="../../components/animate-css/animate.min.css" no-shim>
		<style>
			esis-ui-card {
				margin: 10px 5px !important;
				padding: 5px;
			}
			table tr th {
				text-align: left;
			}
			h4 {
				margin: 5px;
			}
			.float-right {
				position: absolute;
				right: 0px;
				top: 0px;
			}
		</style>

		<esis-ui-card z="1" class="animated" id="card" style="background-color:white">

			<div>
				<h4 style="color: #888">{{file.info.name}}</h4>
				<esis-ui-delete-button class="float-right" label="" on-delete="{{_delete}}"></esis-ui-delete-button>
			</div>

			<template bind if="{{file.resources.length == 1}}">
				<esis-ui-resource file="{{file}}" resource="{{file.resources[0]}}"></esis-ui-resource>
			</template>

    		<template bind if="{{file.resources.length > 1}}">
    			<div style="margin-left: 25px">
    				<h4>Extracted Resources</h4>
    				<template repeat="{{resource in file.resources}}">
    					<esis-ui-resource file="{{file}}" resource="{{resource}}" showName></esis-ui-resource>
    				</template>
    			</div>
    		</template>
		</esis-ui-card>
	</template>
	<script>
		Polymer('esis-ui-file', {

			_delete : function() {
				this.$.card.classList.add('flipOutX');
				setTimeout(function(){
					document.querySelector('esis-datastore').removeFile(this.file);
				}.bind(this), 500);
			}
		});
	</script>
<polymer-element>