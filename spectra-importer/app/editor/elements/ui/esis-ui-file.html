<link rel="import" href="esis-ui-card.html" />
<link rel="import" href="esis-ui-delete-button.html" />
<link rel="import" href="esis-ui-resource.html" />

<polymer-element name="esis-ui-file" attributes="file">
	<template>
		<link rel="stylesheet" href="../../components/animate-css/animate.min.css" no-shim>
		<style>
			.card {
				margin: 10px 5px;
				padding: 5px;
				box-shadow: 0 0 5px #888;
			}
			table tr th {
				text-align: left;
			}
			h4 {
				margin: 5px;
			}
		</style>

		<div id="card" class="card animated">
  			

			<div layout horizontal>
				<div flex>
					<h4 style="color: #888">{{file.info.name}}</h4>
				</div>
				<div>
					<esis-ui-delete-button label="" on-delete="{{_delete}}"></esis-ui-delete-button>
				</div>
			</div>

			<template bind if="{{file.resources.length == 1}}">
				<esis-ui-resource file="{{file}}" resource="{{file.resources[0]}}"></esis-ui-resource>
			</template>

    		<template bind if="{{file.resources.length > 1}}">
    			<div style="margin-left: 25px">
    				<h4>Extracted Resources</h4>
    				<template repeat="{{resource in file.resources}}">
    					<esis-ui-resource file="{{file}}" resource="{{resource}}" showName></esis-ui-resource>
    				</template>
    			</div>
    		</template>
		</div>
	</template>
	<script>
		Polymer('esis-ui-file', {

			_delete : function() {
				this.$.card.classList.add('flipOutX');
				setTimeout(function(){
					document.querySelector('esis-datastore').removeFile(this.file);
				}.bind(this), 500);
			}
		});
	</script>
<polymer-element>