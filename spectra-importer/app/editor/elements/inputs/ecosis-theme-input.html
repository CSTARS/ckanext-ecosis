
<script>
  Polymer({
    is : 'ecosis-theme-input',

    ready : function() {
      this.schema = ecosis.ds.metadataDefinitions.Theme;
    },

    attached : function() {

      var col1 = '';
      var col2 = '';

      for( var i = 0; i < this.schema.length; i++ ) {
        if( this.schema[i].name == 'Keywords' ) continue;
        var input = '<ecosis-schema-input metadata="'+this.schema[i].name+'"></ecosis-schema-input>';

        if( i % 2 == 0 ) col1 += input;
        else col2 += input;
      }

      this.innerHTML =
        '<div class="row">'+
          '<div class="col-md-6">'+ col1 + '</div>'+
          '<div class="col-md-6">'+ col2 + '</div>'+
        '</div>';

      this.addEventListener('update', this.onUpdate.bind(this));

      ecosis.ds.on('load', this.setValues.bind(this));
    },

    setValues : function() {
      for( var i = 0; i < this.schema.length; i++ ) {
        if( this.schema[i].name == 'Keywords' ) continue;

        var ele = this.querySelector('ecosis-schema-input[metadata="'+this.schema[i].name+'"]');
        var value = ecosis.ds.getDatasetExtra(this.schema[i].name).value || '';

        var other = '';
        if( this.schema[i].allowOther ) {
          other = ecosis.ds.getDatasetExtra(this.schema[i].name+' Other').value || '';
        }

        ele.setValue(value, other);
      }
    },

    onUpdate : function(e) {
      var attr = e.detail.attribute;
      var value = e.detail.value;
      ecosis.ds.setDatasetExtra(attr, value);
    }


  })
</script>
