<polymer-element name="esis-schema-settings">
	<template>
		<style>
			h4 {
				border-bottom: 1px solid #eee;
				padding-bottom: 5px;
			}
		</style>

		<paper-tabs id="tabs" selected="{{currentTab}}">
			<paper-tab>Customize Schema</paper-tab>
			<paper-tab>Special Attributes</paper-tab>
			<paper-tab>Map Names</paper-tab>
		</paper-tabs>

		<div hidden?="{{currentTab != 0}}">
			<esis-attribute-editor id="editor"></esis-attribute-editor>
		</div>

		<div hidden?="{{currentTab != 2}}">
	    	<esis-attribute-mapping></esis-attribute-mapping>
	    </div>

	    <div hidden?="{{currentTab != 1}}">
	    	<esis-attribute-ordering id="ordering"></esis-attribute-ordering>
	    </div>

	</template>
	<script>
		Polymer('esis-schema-settings', {
			datasheets : [],
			saving : false,

			map : {},
			inverseMap : {},
			attrMapList : [],
			menuItem : null,

			ds : null,

			currentTab : 0,

			observe : {
				'ds.resources' : '_updateVisibility',
				'ds.editMode' : '_updateVisibility'
			},

			ready : function() {
				this.ds = document.querySelector('esis-datastore');
			},

			// fired when element is attached.  For this element we should render the attribute type control
			onShow : function() {
				this.$.editor.update();
				this.$.ordering.update();

                setTimeout(function(){
                    this.$.tabs.updateBar();
                }.bind(this), 500);
			},

			_updateVisibility : function() {
                this.menuItem.style.display = (this.ds.editMode && this.ds.resources.length > 0) ? 'block' : 'none';
            }

		});
	</script>
</polymer-element>