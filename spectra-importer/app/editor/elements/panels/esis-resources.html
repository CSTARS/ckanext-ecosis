<polymer-element name="esis-resources">
    <template>
        
        <paper-tabs id="tabs" selected="{{tab}}">
            <paper-tab>Add</paper-tab>
            <paper-tab>Current</paper-tab>
        </paper-tabs>

        <div>
            <esis-add-resource hidden?="{{tab != 0}}" on-resource-add="{{onAdd}}"></esis-add-resource>
            <esis-current-resources hidden?="{{tab != 1}}"></esis-current-resources>
        </div>
    </template>
    <script>
        Polymer('esis-resources', {
            menuItem : null,
            tab : 0,
            ds : null,

            observe : {
                'ds.editMode' : '_updateVisibility'
            },

            ready : function() {
                this.ds = document.querySelector('esis-datastore');
            },

            _updateVisibility : function() {
                this.menuItem.style.display = this.ds.editMode ? 'block' : 'none';
            },

            onShow : function() {
                setTimeout(function(){
                    this.$.tabs.updateBar();
                }.bind(this), 500);
            },

            // switch tabs when a resource is added
            onAdd : function() {
                this.tab = 1;
            }

        });
    </script>
</polymer-element>