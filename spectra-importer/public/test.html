<html>
<head>
	<title>Test Page</title>

	<link rel="stylesheet" href="lib/bootstrap2/css/bootstrap.min.css">
	<link rel="stylesheet" href="lib/bootstrap2/css/bootstrap-responsive.min.css">
	<link rel="stylesheet" href="components/font-awesome/css/font-awesome.min.css">

	<script src="/components/jquery/dist/jquery.min.js"></script>
	<script src="lib/bootstrap2/js/bootstrap.min.js"></script>
	<script src="lib/jszip.js"></script>
	<script src="lib/xlsx.js"></script>
	<!--<script src="components/js-xlsx/dist/xlsx.min.js"></script>-->
	<script src="components/js-xls/dist/xls.min.js"></script>
	<script src="components/jquery-csv/src/jquery.csv.js"></script>
	<script src="components/js-md5/js/md5.min.js"></script>

	<script src="js/main.js"></script>
	<script src="js/extractor.js"></script>
	<script src="js/uploader.js"></script>
	<script src="js/extension.js"></script>
	<script src="js/parser.js"></script>

	<script src="js/structures/import.js"></script>
	<script src="js/structures/file.js"></script>
	<script src="js/structures/datasheet.js"></script>
	<script src="js/structures/resource.js"></script>
	<script src="js/structures/spectra.js"></script>
	<script src="js/structures/joinableMetadata.js"></script>

</head>
<body style="padding: 0 20px">

	<div id="shimRoot"></div>
	

<script type="text/javascript">
	// add jquery
	var head = document.getElementsByTagName("head")[0];

	// add visualization api
	var google = document.createElement("script");
	google.src = 'https://www.google.com/jsapi';


	esis.onGoogleLoad = function() {
		// callback is a dumby function that prevents loader from using document.write()
		google.load('visualization', '1.0', {callback: function(){},'packages':['corechart']});
	}

	google.onload = esis.onGoogleLoad;
	head.appendChild(google);
</script>

<style>
.drop-zone-container {
  text-align: center;
}

#drop_zone {
  border: 2px dashed #bbb;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  padding: 25px;
  text-align: center;
  font-size: 20pt;
  color: #bbb;
  background-color: white;
}

.help-block {
	font-size: 12px;
	margin-top: 0px !important;
	color: #999;
}

.card {
	margin: 10px;
	padding: 10px;
	background-color: white;
	border: 1px solid #ccc;
	overflow: hidden
}
</style>

<div id="spectra-start">
	<h1 style="color:#333;margin-bottom:25px"><i class="fa fa-cloud-upload"></i> Import Resources</h1>

	<div class="well" style="color:#666">
		<div class="form-horizontal">
		  <div class="control-group">
		    <label class="control-label" for="parseZip">Zip Files</label>
		    <div class="controls">
		      <label class="checkbox">
		      	<input type="checkbox" style="margin-top:5px" id="parseZip"> Extract
		  	  </label>
		      <span class="help-block">If a zip file is found, should its contents be imported as individual resources?  By default the spectra will be parsed, but the zip will be uploaded intact.</span>
		    </div>
		  </div>
		  <div class="control-group">
		    <label class="control-label" for="inputEmail"><i class="fa fa-file"></i> Select File</label>
		    <div class="controls">
		      <input type="file" style="margin-top:5px" id="file" name="file" multiple>
		      <span class="help-block">Select a files to be imported.</span>
		    </div>
		  </div>
		  
		</div>
	    
        <h4 style="text-align:center">- OR -</h4>
        <div id="drop_zone">Drop files here</div>

        <div style="border-top:1px solid #ccc;padding-top:15px;margin-top:15px">
        	<h4>Metadata Map</h4>
        	<span class="help-block">If your metadata attribute names do not match <a>this</a> list, you can download this metadata map file.  Fill it out and upload in the box to the right.  You can reuse this file, so you only have to do it once for your data.</span>

        	<div class="row-fluid">
        		<div class="span6">
        			<a class="btn btn-default" target="_blank" href="/metadata_map">Download Map Template</a>
        		</div>
        		<div class="span6">
        			Upload Map: <input type="file" style="margin-top:5px" id="map" name="map">
        		</div>
        	</div>


        </div>
	</div>
</div>

<div id="stats" style="display:none;text-align:center"></div>


<div id="spectra-modify" style="display:none">
	<h3 class="panel-title">Parsed Spectral Data and Joinable Data
		<a class="btn btn-default pull-right" id="show-status">Inspect</a>
	</h3>
	<div class="well panel-body" id="data-body" style="max-height:400px;overflow:auto"></div>

	<h3 class="panel-title">Resource Files</h3>
	<div class="well panel-body" id="resources-body" style="max-height:400px;overflow:auto"></div>

	<button class="btn btn-primary" id="addResources">Add Resources</button>
</div>


<div id="spectra-status" style="display:none">
	<a class="btn btn-default pull-right back">Back</a>
	<div id="spectra-status-content"></div>
	<a class="btn btn-default back">Back</a>
</div>

<!-- TODO
<h1>Example</h1>
<table class="table">
	<tr><td class="file-data">location</td><td class="file-data">38, -121</td><td></td><td></td></tr>
	<tr><td class="file-data">device</td><td class="file-data">asd</td><td></td><td></td></tr>
	<tr><td class="file-data">date</td><td class="file-data">2014-1-5</td><td></td><td></td></tr>
	<tr><td class="file-data"></td><td class="file-data"></td><td></td><td></td></tr>
	<tr style="height:40px"><td></td><td></td><td></td><td></td></td>
	<tr><td class="spectra-metadata"></td><td class="spectra-metadata"></td><td class="spectra-metadata"></td><td class="spectra-metadata"></td></tr>
	<tr><td class="spectra-metadata"></td><td class="spectra-metadata"></td><td class="spectra-metadata"></td><td class="spectra-metadata"></td></tr>
	<tr><td class="spectra-metadata"></td><td class="spectra-metadata"></td><td class="spectra-metadata"></td><td class="spectra-metadata"></td></tr>
	<tr><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td></tr>
	<tr><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td></tr>
	<tr><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td></tr>
	<tr><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td><td class="spectra-data"></td></tr>
</table>
-->

<div class="modal fade" id="Modal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title">File Info</h4>
  </div>
  <div class="modal-body" ></div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
  </div>
</div><!-- /.modal -->

<script>
	esis.app.init();
</script>
	
</body>
</html>